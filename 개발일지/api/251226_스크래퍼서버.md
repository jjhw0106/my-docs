# 📅 2025년 12월 26일 작업 리포트 (With GEMINI)

## 📝 개요 (Summary)
금일 작업은 **프론트엔드 권한 시스템 고도화**와 **외부 채용 플랫폼 데이터 수집을 위한 Scraper 마이크로서비스 구축**을 중점적으로 수행하였습니다. 페이지별 접근 권한을 중앙에서 관리하는 시스템을 구축하고, NestJS와 Playwright를 활용하여 실제 웹 자동화를 수행할 수 있는 독립 서버 환경을 완성하였습니다.

---

## 🔐 1. 권한 시스템 및 라우팅 고도화 (Auth System & Routing)

### 🏗 아키텍처 설계 및 구현
| 구분 | 파일 경로 | 역할 및 변경 사항 |
| :--- | :--- | :--- |
| **Logic** | `composables/usePagePermissions.ts` | **(신규)** 보호된 라우트 목록(`/stocks`, `/my-career` 등)을 중앙에서 관리하는 서비스 계층 생성. |
| **Middleware** | `middleware/auth.global.ts` | **(신규)** 전역 미들웨어를 통해 모든 페이지 이동 시 `usePagePermissions`와 대조하여 권한 체크 자동화. |
| **Layout** | `layouts/dashboard.vue` | **(수정)** 현재 경로에 따른 동적 페이지 타이틀 표시 및 사이드바 메뉴 활성화(Active) UI 구현. |

---

## 🤖 2. Scraper 마이크로서비스 구축 (NestJS Scraper Service)

채용 사이트(원티드, 잡코리아 등)의 데이터를 자동으로 가져오기 위한 독립 서버를 구축했습니다.

### 🛠 기술 스택
* **Framework**: NestJS (TypeScript)
* **Automation**: Playwright (Chromium)
* **Port**: 4000 (Nuxt 3000번과 충돌 방지)

### 🚀 주요 구현 내용
1. **Scraper 모듈 구현**: `ScraperService`를 통해 플랫폼별(Wanted, JobKorea) 분기 로직 및 브라우저 제어 환경 구축.
2. **CORS 설정**: 프론트엔드(Nuxt)에서 API 호출이 가능하도록 전역 CORS 허용 설정.
3. **잡코리아 자동화 테스트**: `POST /scraper/jobkorea` 호출 시 실제 브라우저가 기동되어 잡코리아 로그인 페이지까지 자동 이동하는 프로세스 검증 완료.

---

## 🎨 3. UI/UX 개선 (Dashboard & Career Page)

* **Dashboard Submenu**: 'My Career' 메뉴 하위에 플랫폼별 서브 메뉴(Wanted, JobKorea 등)를 아코디언 형식으로 배치.
* **Platform Page**: 각 플랫폼 상세 페이지(`[platform].vue`)를 생성하고, 플랫폼별 브랜드 컬러가 적용된 **'정보 가져오기'** 버튼 구현.
* **Dynamic Routing**: `/my-career/[platform]` 동적 라우팅을 통해 여러 채용 플랫폼을 하나의 템플릿으로 관리.

---

## 📂 변경된 파일 목록 (File Changes)

```text
my-backoffice/
├── mybo-frontend/frontend/
│   ├── composables/
│   │   └── usePagePermissions.ts  # [신규] 권한 관리 중앙화
│   ├── middleware/
│   │   └── auth.global.ts         # [신규] 전역 보안 가드
│   ├── layouts/
│   │   └── dashboard.vue          # [수정] 동적 타이틀 및 사이드바 고도화
│   └── pages/
│       ├── settings.vue           # [신규] 계정 설정 페이지
│       └── my-career/
│           ├── index.vue          # [수정] overview로 리다이렉트 처리
│           ├── overview.vue       # [이동] 기존 index 내용 이동
│           └── [platform].vue     # [신규] 플랫폼 상세 및 스크랩 트리거
└── scraper-server/                # [신규] NestJS 프로젝트 전체
    ├── src/scraper/
    │   ├── scraper.service.ts     # [신규] Playwright 제어 로직
    │   └── scraper.controller.ts  # [신규] 스크래핑 API 엔드포인트
    └── main.ts                    # [수정] 4000번 포트 및 CORS 설정
```

---

## ✅ 테스트 정보 (Test Info)
* **보안 테스트**: 비로그인 상태에서 `/my-career` 접근 시 `/login`으로 정상 리다이렉트 확인.
* **스크래퍼 테스트**: `curl -X POST http://localhost:4000/scraper/jobkorea` 실행 시 크로미움 브라우저를 통해 로그인 화면 진입 확인.
* **UI 테스트**: 사이드바 서브 메뉴 클릭 시 상단 헤더 타이틀 동적 변경 확인.
